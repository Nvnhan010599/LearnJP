<!DOCTYPE html>
<html lang="vi">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Há»c Sá»‘ Äáº¿m Tiáº¿ng Nháº­t (TÆ°Æ¡ng TÃ¡c)</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<link
		href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Inter:wght@400;500;700&display=swap"
		rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<style>
		:root {
			--galaxy-bg-dark: linear-gradient(135deg, #1a0633 0%, #0f0522 30%, #1a0633 70%, #0c041f 100%);
			--galaxy-bg-light: linear-gradient(135deg, #f0f4ff 0%, #e6e9ff 100%);
			--galaxy-primary-dark: #818cf8;
			--galaxy-primary-light: #0ea5e9;
			--galaxy-text-dark: #e2e8f0;
			--galaxy-text-light: #1e293b;
			--galaxy-card-dark: rgba(255, 255, 255, 0.1);
			--galaxy-card-light: #ffffff;
			--galaxy-card-border-dark: rgba(255, 255, 255, 0.2);
			--galaxy-card-border-light: rgba(99, 102, 241, 0.2);
			--galaxy-header-dark: #c7d2fe;
			--galaxy-header-light: #0c4a6e;
		}

		body {
			font-family: 'Inter', 'Noto Sans JP', sans-serif;
			min-height: 100vh;
			transition: background 0.5s ease;
			color: #333;
		}

		.dark {
			background: var(--galaxy-bg-dark);
			color: var(--galaxy-text-dark);
		}

		.light {
			background: var(--galaxy-bg-light);
			color: #2d3748;
		}

		.jp-font {
			font-family: 'Noto Sans JP', sans-serif;
		}

		/* Star background */
		#stars {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			z-index: 0;
			pointer-events: none;
		}

		.star {
			position: absolute;
			background-color: white;
			border-radius: 50%;
			animation: twinkle 4s infinite;
		}

		@keyframes twinkle {

			0%,
			100% {
				opacity: 0.2;
				transform: scale(0.8);
			}

			50% {
				opacity: 1;
				transform: scale(1);
			}
		}

		/* Galaxy theme elements */
		.galaxy-header {
			background: rgba(129, 140, 248, 0.15);
			backdrop-filter: blur(10px);
			border: 1px solid rgba(129, 140, 248, 0.2);
			border-radius: 16px;
		}

		.light .galaxy-header {
			background: rgba(255, 255, 255, 0.9);
			border: 1px solid rgba(99, 102, 241, 0.3);
		}

		.galaxy-card {
			background: rgba(255, 255, 255, 0.1);
			backdrop-filter: blur(10px);
			border: 1px solid rgba(129, 140, 248, 0.2);
			transition: all 0.3s ease;
		}

		.light .galaxy-card {
			background: rgba(255, 255, 255, 0.95);
			border: 1px solid rgba(99, 102, 241, 0.2);
			color: #2d3748;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
		}

		.galaxy-card:hover {
			transform: translateY(-5px);
			box-shadow: 0 10px 25px rgba(129, 140, 248, 0.2);
		}

		.light .galaxy-card:hover {
			box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
		}

		.galaxy-button {
			background: linear-gradient(135deg, #818cf8 0%, #6366f1 100%);
			color: white;
			transition: all 0.3s ease;
		}

		.galaxy-button:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 15px rgba(129, 140, 248, 0.4);
		}

		.light .galaxy-button {
			background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
		}

		.light .galaxy-button:hover {
			box-shadow: 0 4px 15px rgba(14, 165, 233, 0.4);
		}

		.galaxy-primary {
			color: var(--galaxy-primary-dark);
		}

		.light .galaxy-primary {
			color: #0c4a6e;
		}

		/* Text contrast */
		.dark .text-slate-700 {
			color: #cbd5e1;
		}

		.light .text-slate-700 {
			color: #2d3748;
		}

		.dark .text-slate-500 {
			color: #94a3b8;
		}

		.light .text-slate-500 {
			color: #4a5568;
		}

		.dark .text-sky-600 {
			color: #7dd3fc;
		}

		.light .text-sky-600 {
			color: #0c4a6e;
		}

		/* Modal */
		.modal-content {
			background: rgba(30, 41, 59, 0.95);
			backdrop-filter: blur(10px);
			border: 1px solid rgba(129, 140, 248, 0.3);
		}

		.light .modal-content {
			background: rgba(255, 255, 255, 0.98);
			border: 1px solid rgba(99, 102, 241, 0.2);
			color: #2d3748;
		}

		#modal {
			transition: opacity 0.3s ease;
		}

		.modal-content {
			transition: transform 0.3s ease;
		}

		/* Highlight & Note Styles */
		.highlight {
			background-color: rgba(124, 58, 237, 0.2);
			color: #c084fc;
			font-weight: 600;
		}

		.light .highlight {
			background-color: #fef9c3;
			color: #b45309;
		}

		.highlight .note {
			color: #d8b4fe;
		}

		.light .highlight .note {
			color: #92400e;
		}

		/* Scrollbar */
		::-webkit-scrollbar {
			width: 8px;
		}

		::-webkit-scrollbar-track {
			background: #1e293b;
		}

		.light ::-webkit-scrollbar-track {
			background: #f1f5f9;
		}

		::-webkit-scrollbar-thumb {
			background: #475569;
			border-radius: 10px;
		}

		.light ::-webkit-scrollbar-thumb {
			background: #cbd5e1;
		}

		::-webkit-scrollbar-thumb:hover {
			background: #64748b;
		}

		/* Icon Styles */
		.card-icon {
			width: 3rem;
			height: 3rem;
			display: flex;
			align-items: center;
			justify-content: center;
			border-radius: 12px;
			background: rgba(129, 140, 248, 0.15);
			color: #818cf8;
		}

		.light .card-icon {
			background: rgba(14, 165, 233, 0.15);
			color: #0ea5e9;
		}

		.modal-icon {
			width: 2.5rem;
			height: 2.5rem;
		}

		/* Main Tab Styles */
		#main-tabs .tab-btn {
			transition: all 0.3s ease;
			background: rgba(129, 140, 248, 0.2);
			color: #c7d2fe;
		}

		#main-tabs .tab-btn.active {
			background: linear-gradient(135deg, #818cf8 0%, #6366f1 100%);
			color: white;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		}

		.light #main-tabs .tab-btn {
			background: rgba(14, 165, 233, 0.15);
			color: #0c4a6e;
			font-weight: 500;
		}

		.light #main-tabs .tab-btn.active {
			background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
		}

		/* Modal Tab Styles */
		#modal-tabs .tab-btn {
			border-bottom: 3px solid transparent;
			color: #cbd5e1;
		}

		.light #modal-tabs .tab-btn {
			color: #4a5568;
		}

		#modal-tabs .tab-btn.active {
			border-bottom-color: #818cf8;
			color: #c7d2fe;
		}

		.light #modal-tabs .tab-btn.active {
			border-bottom-color: #0ea5e9;
			color: #0c4a6e;
			font-weight: 600;
		}

		/* Exercise Styles */
		.exercise-card {
			transition: all 0.3s ease;
		}

		.exercise-card:hover {
			transform: translateY(-5px);
			box-shadow: 0 10px 25px rgba(129, 140, 248, 0.3);
		}

		.light .exercise-card:hover {
			box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
		}

		.result-icon {
			width: 24px;
			height: 24px;
			display: flex;
			align-items: center;
			justify-content: center;
			border-radius: 50%;
		}

		.progress-bar {
			transition: width 0.5s ease-in-out;
		}

		/* --- Flashcard Styles --- */
		.perspective-container {
			perspective: 1000px;
		}

		.flashcard {
			transform-style: preserve-3d;
			transition: transform 0.6s;
			box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
		}

		.flashcard.is-flipped {
			transform: rotateY(180deg);
		}

		.flashcard-face {
			-webkit-backface-visibility: hidden;
			backface-visibility: hidden;
			border-radius: 16px;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			padding: 1rem;
			transition: background 0.3s ease, color 0.3s ease;

			/* MÃ€U Ná»€N FLASHCARD Máº¶C Äá»ŠNH (CHáº¾ Äá»˜ Tá»I) */
			background-color: #334155;
			/* Slate 700 */
			color: #f1f5f9;
			/* Slate 100 */
		}

		.flashcard-back {
			transform: rotateY(180deg);
		}

		/* MÃ€U Ná»€N FLASHCARD Máº¶C Äá»ŠNH (CHáº¾ Äá»˜ SÃNG) */
		.light .flashcard-face {
			background-color: #e2e8f0;
			/* Slate 200 */
			color: #1e293b;
			/* Slate 800 */
		}

		/* Style cho tháº» Ghi chÃº Ä‘áº·c biá»‡t (Note Lozenge) */
		.note-lozenge {
			font-weight: 600;
			padding: 0.25rem 0.75rem;
			border-radius: 9999px;
			margin-top: 1rem;
			font-size: 0.8rem;
			background: linear-gradient(135deg, #fcd34d, #fbbf24);
			/* Amber gradient */
			color: #1e293b;
			/* Chá»¯ mÃ u Ä‘en */
		}

		/* --- Ruby (Furigana) Styles --- */
		ruby rt {
			font-size: 0.6em;
			font-weight: 500;
			user-select: none;
		}

		.light ruby rt {
			color: #475569;
		}

		/* Footer */
		footer {
			border-top: 1px solid rgba(129, 140, 248, 0.2);
		}

		.light footer {
			border-top: 1px solid rgba(99, 102, 241, 0.1);
		}

		/* Cáº£i thiá»‡n kháº£ nÄƒng Ä‘á»c trong cháº¿ Ä‘á»™ sÃ¡ng */
		.light h1,
		.light h2,
		.light h3,
		.light h4 {
			color: #1a202c;
		}

		.light p,
		.light li {
			color: #2d3748;
			line-height: 1.6;
		}

		.light .text-indigo-200 {
			color: #4a5568;
		}

		.light .galaxy-primary {
			color: #0c4a6e;
			font-weight: 700;
		}

		.light input,
		.light textarea {
			color: #2d3748;
			background-color: #f8fafc;
		}

		.light table th {
			background-color: #f1f5f9;
			color: #1e293b;
		}

		.light table td {
			color: #334155;
		}

		.light .tab-btn {
			font-weight: 500;
		}
	</style>
</head>

<body class="dark">
	<div id="stars"></div>

	<div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-6xl relative z-10">
		<div class="absolute top-4 right-4">
			<button id="theme-toggle" class="galaxy-button px-4 py-2 rounded-full text-sm font-medium">
				<i class="fas fa-moon mr-2"></i>Cháº¿ Ä‘á»™ tá»‘i
			</button>
		</div>

		<header class="text-center mb-10">
			<div class="flex justify-center mb-4">
				<a href="../supplementary.html" aria-label="Trang chá»§">
					<div class="galaxy-card rounded-full p-3 shadow-lg">
						<i class="fas fa-book text-2xl galaxy-primary"></i>
					</div>
				</a>
			</div>
			<h1 class="text-3xl sm:text-4xl font-bold galaxy-primary jp-font">æ—¥æœ¬èªã®æ•°ãˆæ–¹</h1>
			<h2 class="text-xl sm:text-2xl font-semibold text-slate-200 mt-2">CÃ´ng cá»¥ há»c LÆ°á»£ng tá»« Tiáº¿ng Nháº­t</h2>
			<p class="text-indigo-200 mt-3 max-w-2xl mx-auto">CÃ´ng cá»¥ toÃ n diá»‡n giÃºp báº¡n náº¯m vá»¯ng cÃ¡ch Ä‘áº¿m trong tiáº¿ng Nháº­t,
				tá»« lÃ½ thuyáº¿t Ä‘áº¿n thá»±c hÃ nh.</p>
		</header>

		<div id="main-tabs" class="flex justify-center mb-8">
			<div class="inline-flex rounded-full shadow p-1 galaxy-card">
				<button data-main-view="theory" class="tab-btn active px-6 py-2 rounded-full font-medium">LÃ½ Thuyáº¿t</button>
				<button data-main-view="tips" class="tab-btn px-6 py-2 rounded-full font-medium">Máº¹o Ghi Nhá»›</button>
				<button data-main-view="practice" class="tab-btn px-6 py-2 rounded-full font-medium">BÃ i Táº­p</button>
			</div>
		</div>

		<main>
			<div id="theory-content">
				<p class="text-center text-indigo-200 mb-8">Nháº¥p vÃ o má»™t chá»§ Ä‘á» Ä‘á»ƒ xem chi tiáº¿t cÃ¡ch Ä‘áº¿m vÃ  há»c vá»›i flashcard.
				</p>
				<div id="counter-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
				</div>
			</div>

			<div id="tips-content" class="hidden">
				<p class="text-center text-indigo-200 mb-8">NhÃ³m cÃ¡c lÆ°á»£ng tá»« theo quy táº¯c biáº¿n Ã¢m Ä‘á»ƒ há»c nhanh hÆ¡n!</p>
				<div class="space-y-8 max-w-3xl mx-auto">
					<div class="galaxy-card rounded-xl p-6">
						<h3 class="text-xl font-bold text-purple-300 jp-font flex items-center gap-3"><span
								class="text-3xl">ğŸš€</span><span>NhÃ³m 1: Biáº¿n Ã¢m vá»›i Ã‚m ngáº¯t (ã£)</span></h3>
						<p class="mt-2 text-indigo-100">Phá»• biáº¿n nháº¥t, xáº£y ra khi lÆ°á»£ng tá»« báº¯t Ä‘áº§u báº±ng phá»¥ Ã¢m **K, S, T**.</p>
						<div class="mt-4 bg-indigo-900/30 border border-indigo-700 rounded-lg p-4">
							<h4 class="font-semibold text-purple-300">Quy táº¯c</h4>
							<ul class="list-disc list-inside text-purple-200 mt-2 space-y-1 jp-font">
								<li>1 (ã„ã¡) â†’ <strong class="jp-font">ã„ã£-</strong></li>
								<li>6 (ã‚ã) â†’ <strong class="jp-font">ã‚ã£-</strong></li>
								<li>8 (ã¯ã¡) â†’ <strong class="jp-font">ã¯ã£-</strong></li>
								<li>10 (ã˜ã‚…ã†) â†’ <strong class="jp-font">ã˜ã‚…ã£- / ã˜ã£-</strong></li>
							</ul>
						</div>
						<div class="mt-4">
							<h4 class="font-semibold text-indigo-200">CÃ¡c lÆ°á»£ng tá»« tÆ°Æ¡ng tá»±:</h4>
							<ul class="list-disc list-inside text-indigo-100 mt-2 space-y-1">
								<li><strong>ï½å› (ã‹ã„):</strong> <span class="jp-font text-sm">ikkai, rokkai, hakkai, jukkai</span></li>
								<li><strong>ï½éš (ã‹ã„):</strong> <span class="jp-font text-sm">ikkai, rokkai, hakkai, jukkai</span>. <span
										class="text-xs font-semibold text-purple-300">LÆ°u Ã½: 3 lÃ  san-gai.</span></li>
								<li><strong>ï½å†Š (ã•ã¤):</strong> <span class="jp-font text-sm">issatsu, hassatsu, jussatsu</span>. <span
										class="text-xs font-semibold text-purple-300">LÆ°u Ã½: khÃ´ng biáº¿n Ã¢m á»Ÿ sá»‘ 6.</span></li>
								<li><strong>ï½è¶³ (ãã):</strong> <span class="jp-font text-sm">issoku, hassoku, jussoku</span>. <span
										class="text-xs font-semibold text-purple-300">LÆ°u Ã½: 3 lÃ  san-zoku.</span></li>
								<li><strong>ï½å€‹ (ã“):</strong> <span class="jp-font text-sm">ikko, rokko, hakko, jukko</span></li>
							</ul>
						</div>
					</div>
					<div class="galaxy-card rounded-xl p-6">
						<h3 class="text-xl font-bold text-blue-300 jp-font flex items-center gap-3"><span
								class="text-3xl">ğŸ¨</span><span>NhÃ³m 2: Biáº¿n Ã¢m vá»›i Ã‚m Ä‘á»¥c (ã‚›) vÃ  BÃ¡n Ä‘á»¥c (ã‚œ)</span></h3>
						<p class="mt-2 text-indigo-100">DÃ nh cho cÃ¡c lÆ°á»£ng tá»« báº¯t Ä‘áº§u báº±ng phá»¥ Ã¢m **H**.</p>
						<div class="mt-4 bg-blue-900/30 border border-blue-700 rounded-lg p-4">
							<h4 class="font-semibold text-blue-300">Quy táº¯c</h4>
							<ul class="list-disc list-inside text-blue-200 mt-2 space-y-1">
								<li>Sá»‘ **1, 6, 8, 10**: Biáº¿n Ã¢m **H â†’ P** (BÃ¡n Ä‘á»¥c - Maru) vÃ  thÃªm Ã¢m ngáº¯t `(ã£)`.</li>
								<li>Sá»‘ **3**: Biáº¿n Ã¢m **H â†’ B** (Ã‚m Ä‘á»¥c - Tenten).</li>
							</ul>
						</div>
						<div class="mt-4">
							<h4 class="font-semibold text-indigo-200">CÃ¡c lÆ°á»£ng tá»« tÆ°Æ¡ng tá»±:</h4>
							<ul class="list-disc list-inside text-indigo-100 mt-2 space-y-2">
								<li><strong>ï½æœ¬ (ã»ã‚“):</strong> 3 â†’ <span class="jp-font font-semibold">san-bon</span>; 1,6,8,10 â†’ <span
										class="jp-font font-semibold">ip-pon, rop-pon, hap-pon, jup-pon</span></li>
								<li><strong>ï½æ¯ (ã¯ã„):</strong> 3 â†’ <span class="jp-font font-semibold">san-bai</span>; 1,6,8,10 â†’ <span
										class="jp-font font-semibold">ip-pai, rop-pai, hap-pai, jup-pai</span></li>
								<li><strong>ï½åŒ¹ (ã²ã):</strong> 3 â†’ <span class="jp-font font-semibold">san-biki</span>; 1,6,8,10 â†’ <span
										class="jp-font font-semibold">ip-piki, rop-piki, hap-piki, jup-piki</span></li>
							</ul>
						</div>
					</div>
					<div class="galaxy-card rounded-xl p-6">
						<h3 class="text-xl font-bold text-green-300 jp-font flex items-center gap-3"><span
								class="text-3xl">âœ…</span><span>NhÃ³m 3: Gáº§n nhÆ° khÃ´ng biáº¿n Ã¢m (Dá»… nháº¥t)</span></h3>
						<p class="mt-4 text-indigo-100">NhÃ³m nÃ y ráº¥t dá»… nhá»› vÃ¬ cÃ¡ch Ä‘á»c gáº§n nhÆ° khÃ´ng thay Ä‘á»•i.</p>
						<ul class="list-disc list-inside text-indigo-100 mt-2 space-y-1">
							<li><strong>ï½æš (ã¾ã„):</strong> Äáº¿m váº­t má»ng (giáº¥y, Ä‘Ä©a CD...). HoÃ n toÃ n khÃ´ng biáº¿n Ã¢m.</li>
							<li><strong>ï½å° (ã ã„):</strong> Äáº¿m mÃ¡y mÃ³c (xe, tivi...). HoÃ n toÃ n khÃ´ng biáº¿n Ã¢m.</li>
						</ul>
					</div>
					<div class="galaxy-card rounded-xl p-6">
						<h3 class="text-xl font-bold text-yellow-300 jp-font flex items-center gap-3"><span
								class="text-3xl">â­</span><span>NhÃ³m 4: CÃ¡c trÆ°á»ng há»£p Ä‘áº·c biá»‡t cáº§n nhá»›</span></h3>
						<p class="mt-4 text-indigo-100">Nhá»¯ng lÆ°á»£ng tá»« nÃ y cÃ³ cÃ¡ch Ä‘á»c riÃªng mÃ  báº¡n nÃªn há»c thuá»™c.</p>
						<ul class="list-disc list-inside text-indigo-100 mt-2 space-y-2">
							<li><strong>ï½äºº (ã«ã‚“) - Äáº¿m ngÆ°á»i:</strong>
								<ul class="list-['-_'] list-inside ml-4 text-sm">
									<li>1 ngÆ°á»i â†’ <span class="font-semibold jp-font">ã²ã¨ã‚Š</span> (khÃ´ng pháº£i ã„ã¡ã«ã‚“)</li>
									<li>2 ngÆ°á»i â†’ <span class="font-semibold jp-font">ãµãŸã‚Š</span> (khÃ´ng pháº£i ã«ã«ã‚“)</li>
									<li>4 ngÆ°á»i â†’ <span class="font-semibold jp-font">ã‚ˆã«ã‚“</span> (khÃ´ng pháº£i ã‚ˆã‚“ã«ã‚“)</li>
								</ul>
							</li>
							<li><strong>ï½æ™‚é–“ (ã˜ã‹ã‚“) - Äáº¿m giá»:</strong>
								<ul class="list-['-_'] list-inside ml-4 text-sm">
									<li>4 giá» â†’ <span class="font-semibold jp-font">ã‚ˆã˜ã‹ã‚“</span> (khÃ´ng pháº£i ã‚ˆã‚“ã˜ã‹ã‚“)</li>
									<li>9 giá» â†’ <span class="font-semibold jp-font">ãã˜ã‹ã‚“</span> (khÃ´ng pháº£i ãã‚…ã†ã˜ã‹ã‚“)</li>
								</ul>
							</li>
							<li><strong>ï½ã¤ - CÃ¡ch Ä‘áº¿m chung:</strong>
								<p class="ml-4 text-sm">ÄÃ¢y lÃ  má»™t há»‡ thá»‘ng Ä‘áº¿m riÃªng, khÃ´ng tuÃ¢n theo quy táº¯c nÃ o á»Ÿ trÃªn. Cáº§n há»c thuá»™c
									tá»« 1 (ã²ã¨ã¤) Ä‘áº¿n 10 (ã¨ãŠ).</p>
							</li>
						</ul>
					</div>
				</div>
			</div>

			<div id="practice-content" class="hidden">
				<div class="galaxy-card rounded-2xl p-6 mb-8 galaxy-header">
					<div class="flex items-center justify-between mb-6">
						<h3 class="text-2xl font-bold galaxy-primary">BÃ i Táº­p TÆ°Æ¡ng TÃ¡c</h3>
						<div class="flex items-center gap-2">
							<span class="text-sm font-medium text-indigo-200">Tiáº¿n Ä‘á»™:</span>
							<div class="w-32 bg-slate-700 rounded-full h-2.5">
								<div id="progress-bar" class="progress-bar bg-indigo-500 h-2.5 rounded-full" style="width: 0%"></div>
							</div>
							<span id="progress-text" class="text-sm font-bold text-indigo-200">0/10</span>
						</div>
					</div>
					<div id="exercise-container" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>
					<div class="mt-8 text-center"><button id="reset-btn" class="galaxy-button font-medium py-2 px-6 rounded-lg"><i
								class="fas fa-redo mr-2"></i>LÃ m Láº¡i BÃ i Táº­p</button></div>
				</div>
			</div>
		</main>

		<footer class="text-center mt-10 py-6">
			<p class="text-sm text-indigo-300">ChÃºc báº¡n há»c tá»‘t vÃ  ghi nhá»› tháº­t nhanh! (ãŒã‚“ã°ã£ã¦ãã ã•ã„ï¼)</p>
		</footer>
	</div>

	<div id="modal"
		class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 hidden opacity-0">
		<div id="modal-content" class="modal-content rounded-2xl shadow-2xl w-full max-w-md mx-auto transform scale-95">
			<div id="modal-header" class="flex justify-between items-center p-5 border-b border-slate-700"></div>
			<div id="modal-tabs" class="flex border-b border-slate-700 px-2">
				<button data-view="list" class="tab-btn w-1/2 p-4 font-semibold active">Danh sÃ¡ch tá»«</button>
				<button data-view="flashcard" class="tab-btn w-1/2 p-4 font-semibold">Flashcard</button>
			</div>
			<div id="modal-body" class="p-6 max-h-[60vh] overflow-y-auto">
				<div id="list-view"></div>
				<div id="flashcard-view" class="hidden"></div>
			</div>
			<div id="modal-footer" class="p-4 bg-slate-900/50 rounded-b-2xl flex justify-between items-center">
				<div class="relative">
					<button id="flashcard-settings-btn" class="p-2 rounded-full hover:bg-slate-700 transition-colors hidden">
						<svg class="w-6 h-6 text-slate-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
							stroke-width="1.5" stroke="currentColor">
							<path stroke-linecap="round" stroke-linejoin="round"
								d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995s.145.755.438.995l1.003.827c.48.398.668 1.03.26 1.431l-1.296 2.247a1.125 1.125 0 0 1-1.37.49l-1.217-.456c-.355-.133-.75-.072-1.075.124a6.57 6.57 0 0 1-.22.127c-.332.183-.582.495-.645.87l-.213 1.281c-.09.543-.56.94-1.11.94h-2.593c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 0 1-.22-.127c-.324-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 0 1-1.37-.49l-1.296-2.247a1.125 1.125 0 0 1 .26-1.431l1.003-.827c.293-.24.438-.613.438-.995s-.145-.755-.438-.995l-1.003-.827a1.125 1.125 0 0 1-.26-1.431l1.296-2.247a1.125 1.125 0 0 1 1.37-.49l1.217.456c.355.133.75.072 1.075-.124.073-.044.146-.087.22-.127.332-.183.582-.495.645-.87l.213-1.281z" />
							<path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
						</svg>
					</button>
					<div id="flashcard-settings-panel"
						class="absolute left-0 bottom-full mb-2 bg-slate-800 p-4 rounded-lg shadow-xl border border-slate-700 hidden w-64 z-10">
						<p class="font-semibold text-sm text-slate-200 mb-3">TÃ¹y chá»‰nh Flashcard</p>
						<div class="space-y-3">
							<div><label class="font-medium text-sm text-slate-300 block mb-1">Máº·t trÆ°á»›c:</label>
								<div class="flex gap-4 text-sm"><label class="flex items-center gap-1"><input type="radio"
											name="front-view" value="japanese" checked> Tiáº¿ng Nháº­t</label><label
										class="flex items-center gap-1"><input type="radio" name="front-view" value="vietnamese"> Tiáº¿ng
										Viá»‡t</label></div>
							</div>
							<div><label class="font-medium text-sm text-slate-300 block mb-1">Máº·t sau:</label>
								<div class="flex gap-4 text-sm"><label class="flex items-center gap-1"><input type="radio"
											name="back-view" value="japanese"> Tiáº¿ng Nháº­t</label><label class="flex items-center gap-1"><input
											type="radio" name="back-view" value="vietnamese" checked> Tiáº¿ng Viá»‡t</label></div>
							</div>
						</div>
					</div>
				</div>
				<button id="close-modal-btn" class="galaxy-button font-bold py-2 px-6 rounded-lg">ÄÃ³ng</button>
			</div>
		</div>
	</div>

	<script>
		// --- DATA FOR ALL COUNTERS ---
		const countersData = {
			'tsu': { kanji: 'ã¤', reading: 'ã¤', question: 'ã„ãã¤', description: 'Äá»“ váº­t nÃ³i chung', examples: 'DÃ¹ng cho váº­t khÃ´ng cÃ³ lÆ°á»£ng tá»« riÃªng.', icon: `<i class="fas fa-box"></i>`, counts: [{ num: 1, jp: 'ã²ã¨ã¤', reading: 'hitotsu', kanjiFull: 'ä¸€ã¤' }, { num: 2, jp: 'ãµãŸã¤', reading: 'futatsu', kanjiFull: 'äºŒã¤' }, { num: 3, jp: 'ã¿ã£ã¤', reading: 'mittsu', kanjiFull: 'ä¸‰ã¤' }, { num: 4, jp: 'ã‚ˆã£ã¤', reading: 'yottsu', kanjiFull: 'å››ã¤' }, { num: 5, jp: 'ã„ã¤ã¤', reading: 'itsutsu', kanjiFull: 'äº”ã¤' }, { num: 6, jp: 'ã‚€ã£ã¤', reading: 'muttsu', kanjiFull: 'å…­ã¤' }, { num: 7, jp: 'ãªãªã¤', reading: 'nanatsu', kanjiFull: 'ä¸ƒã¤' }, { num: 8, jp: 'ã‚„ã£ã¤', reading: 'yattsu', kanjiFull: 'å…«ã¤' }, { num: 9, jp: 'ã“ã“ã®ã¤', reading: 'kokonotsu', kanjiFull: 'ä¹ã¤' }, { num: 10, jp: 'ã¨ãŠ', reading: 'too', kanjiFull: 'å' }] },
			'nin': { kanji: 'äºº', reading: 'ã«ã‚“', question: 'ä½•äºº (ãªã‚“ã«ã‚“)', description: 'NgÆ°á»i', examples: '', icon: `<i class="fas fa-user-friends"></i>`, counts: [{ num: 1, jp: 'ã²ã¨ã‚Š', reading: 'hitori', kanjiFull: 'ä¸€äºº', note: 'CÃ¡ch Ä‘á»c Ä‘áº·c biá»‡t' }, { num: 2, jp: 'ãµãŸã‚Š', reading: 'futari', kanjiFull: 'äºŒäºº', note: 'CÃ¡ch Ä‘á»c Ä‘áº·c biá»‡t' }, { num: 3, jp: 'ã•ã‚“ã«ã‚“', reading: 'sannin', kanjiFull: 'ä¸‰äºº' }, { num: 4, jp: 'ã‚ˆã«ã‚“', reading: 'yonin', kanjiFull: 'å››äºº', note: 'CÃ¡ch Ä‘á»c Ä‘áº·c biá»‡t (khÃ´ng pháº£i ã‚ˆã‚“ã«ã‚“)' }, { num: 5, jp: 'ã”ã«ã‚“', reading: 'gonin', kanjiFull: 'äº”äºº' }, { num: 6, jp: 'ã‚ãã«ã‚“', reading: 'rokunin', kanjiFull: 'å…­äºº' }, { num: 7, jp: 'ã—ã¡ã«ã‚“ / ãªãªã«ã‚“', reading: 'shichinin / nananin', kanjiFull: 'ä¸ƒäºº' }, { num: 8, jp: 'ã¯ã¡ã«ã‚“', reading: 'hachinin', kanjiFull: 'å…«äºº' }, { num: 9, jp: 'ãã‚…ã†ã«ã‚“', reading: 'kyuunin', kanjiFull: 'ä¹äºº' }, { num: 10, jp: 'ã˜ã‚…ã†ã«ã‚“', reading: 'juunin', kanjiFull: 'åäºº' }] },
			'dai': { kanji: 'å°', reading: 'ã ã„', question: 'ä½•å° (ãªã‚“ã ã„)', description: 'MÃ¡y mÃ³c, xe cá»™', examples: 'VÃ­ dá»¥: mÃ¡y tÃ­nh, tivi, Ã´ tÃ´, xe Ä‘áº¡p...', icon: `<i class="fas fa-car"></i>`, counts: [{ num: 1, jp: 'ã„ã¡ã ã„', reading: 'ichidai', kanjiFull: 'ä¸€å°' }, { num: 2, jp: 'ã«ã ã„', reading: 'nidai', kanjiFull: 'äºŒå°' }, { num: 3, jp: 'ã•ã‚“ã ã„', reading: 'sandai', kanjiFull: 'ä¸‰å°' }, { num: 4, jp: 'ã‚ˆã‚“ã ã„', reading: 'yondai', kanjiFull: 'å››å°' }, { num: 5, jp: 'ã”ã ã„', reading: 'godai', kanjiFull: 'äº”å°' }, { num: 6, jp: 'ã‚ãã ã„', reading: 'rokudai', kanjiFull: 'å…­å°' }, { num: 7, jp: 'ãªãªã ã„', reading: 'nanadai', kanjiFull: 'ä¸ƒå°' }, { num: 8, jp: 'ã¯ã¡ã ã„', reading: 'hachidai', kanjiFull: 'å…«å°' }, { num: 9, jp: 'ãã‚…ã†ã ã„', reading: 'kyuudai', kanjiFull: 'ä¹å°' }, { num: 10, jp: 'ã˜ã‚…ã†ã ã„', reading: 'juudai', kanjiFull: 'åå°' }] },
			'mai': { kanji: 'æš', reading: 'ã¾ã„', question: 'ä½•æš (ãªã‚“ã¾ã„)', description: 'Váº­t má»ng, dáº¹t', examples: 'VÃ­ dá»¥: tá» giáº¥y, Ã¡o phÃ´ng, Ä‘Ä©a CD, áº£nh...', icon: `<i class="fas fa-tshirt"></i>`, counts: [{ num: 1, jp: 'ã„ã¡ã¾ã„', reading: 'ichimai', kanjiFull: 'ä¸€æš' }, { num: 2, jp: 'ã«ã¾ã„', reading: 'nimai', kanjiFull: 'äºŒæš' }, { num: 3, jp: 'ã•ã‚“ã¾ã„', reading: 'sanmai', kanjiFull: 'ä¸‰æš' }, { num: 4, jp: 'ã‚ˆã‚“ã¾ã„', reading: 'yonmai', kanjiFull: 'å››æš' }, { num: 5, jp: 'ã”ã¾ã„', reading: 'gomai', kanjiFull: 'äº”æš' }, { num: 6, jp: 'ã‚ãã¾ã„', reading: 'rokumai', kanjiFull: 'å…­æš' }, { num: 7, jp: 'ãªãªã¾ã„', reading: 'nanamai', kanjiFull: 'ä¸ƒæš' }, { num: 8, jp: 'ã¯ã¡ã¾ã„', reading: 'hachimai', kanjiFull: 'å…«æš' }, { num: 9, jp: 'ãã‚…ã†ã¾ã„', reading: 'kyuumai', kanjiFull: 'ä¹æš' }, { num: 10, jp: 'ã˜ã‚…ã†ã¾ã„', reading: 'juumai', kanjiFull: 'åæš' }] },
			'kai': { kanji: 'å›', reading: 'ã‹ã„', question: 'ä½•å› (ãªã‚“ã‹ã„)', description: 'Sá»‘ láº§n (táº§n suáº¥t)', examples: 'DÃ¹ng Ä‘á»ƒ chá»‰ sá»‘ láº§n thá»±c hiá»‡n má»™t hÃ nh Ä‘á»™ng.', icon: `<i class="fas fa-redo"></i>`, counts: [{ num: 1, jp: 'ã„ã£ã‹ã„', reading: 'ikkai', kanjiFull: 'ä¸€å›', note: 'Ã‚m ngáº¯t (Sokuon)' }, { num: 2, jp: 'ã«ã‹ã„', reading: 'nikai', kanjiFull: 'äºŒå›' }, { num: 3, jp: 'ã•ã‚“ã‹ã„', reading: 'sankai', kanjiFull: 'ä¸‰å›' }, { num: 4, jp: 'ã‚ˆã‚“ã‹ã„', reading: 'yonkai', kanjiFull: 'å››å›' }, { num: 5, jp: 'ã”ã‹ã„', reading: 'gokai', kanjiFull: 'äº”å›' }, { num: 6, jp: 'ã‚ã£ã‹ã„', reading: 'rokkai', kanjiFull: 'å…­å›', note: 'Ã‚m ngáº¯t (Sokuon)' }, { num: 7, jp: 'ãªãªã‹ã„', reading: 'nanakai', kanjiFull: 'ä¸ƒå›' }, { num: 8, jp: 'ã¯ã£ã‹ã„', reading: 'hakkai', kanjiFull: 'å…«å›', note: 'Ã‚m ngáº¯t (Sokuon)' }, { num: 9, jp: 'ãã‚…ã†ã‹ã„', reading: 'kyuukai', kanjiFull: 'ä¹å›' }, { num: 10, jp: 'ã˜ã‚…ã£ã‹ã„', reading: 'jukkai', kanjiFull: 'åå›', note: 'Ã‚m ngáº¯t (Sokuon)' }] },
			'hon': { kanji: 'æœ¬', reading: 'ã»ã‚“', question: 'ä½•æœ¬ (ãªã‚“ã¼ã‚“)', description: 'Váº­t thon, dÃ i', examples: 'VÃ­ dá»¥: bÃºt, chai, lon, Ã´...', icon: `<i class="fas fa-wine-bottle"></i>`, counts: [{ num: 1, jp: 'ã„ã£ã½ã‚“', reading: 'ippon', kanjiFull: 'ä¸€æœ¬', note: 'Ã‚m ngáº¯t (ã£) + BÃ¡n Ä‘á»¥c (ã½)' }, { num: 2, jp: 'ã«ã»ã‚“', reading: 'nihon', kanjiFull: 'äºŒæœ¬' }, { num: 3, jp: 'ã•ã‚“ã¼ã‚“', reading: 'sanbon', kanjiFull: 'ä¸‰æœ¬', note: 'Ã‚m Ä‘á»¥c (ã¼)' }, { num: 4, jp: 'ã‚ˆã‚“ã»ã‚“', reading: 'yonhon', kanjiFull: 'å››æœ¬' }, { num: 5, jp: 'ã”ã»ã‚“', reading: 'gohon', kanjiFull: 'äº”æœ¬' }, { num: 6, jp: 'ã‚ã£ã½ã‚“', reading: 'roppon', kanjiFull: 'å…­æœ¬', note: 'Ã‚m ngáº¯t (ã£) + BÃ¡n Ä‘á»¥c (ã½)' }, { num: 7, jp: 'ãªãªã»ã‚“', reading: 'nanahon', kanjiFull: 'ä¸ƒæœ¬' }, { num: 8, jp: 'ã¯ã£ã½ã‚“', reading: 'happon', kanjiFull: 'å…«æœ¬', note: 'Ã‚m ngáº¯t (ã£) + BÃ¡n Ä‘á»¥c (ã½)' }, { num: 9, jp: 'ãã‚…ã†ã»ã‚“', reading: 'kyuuhon', kanjiFull: 'ä¹æœ¬' }, { num: 10, jp: 'ã˜ã‚…ã£ã½ã‚“', reading: 'juppon', kanjiFull: 'åæœ¬', note: 'Ã‚m ngáº¯t (ã£) + BÃ¡n Ä‘á»¥c (ã½)' }] },
			'satsu': { kanji: 'å†Š', reading: 'ã•ã¤', question: 'ä½•å†Š (ãªã‚“ã•ã¤)', description: 'SÃ¡ch, vá»Ÿ, táº¡p chÃ­', examples: 'DÃ¹ng cho cÃ¡c loáº¡i áº¥n pháº©m Ä‘Æ°á»£c Ä‘Ã³ng thÃ nh quyá»ƒn.', icon: `<i class="fas fa-book"></i>`, counts: [{ num: 1, jp: 'ã„ã£ã•ã¤', reading: 'issatsu', kanjiFull: 'ä¸€å†Š', note: 'Ã‚m ngáº¯t (Sokuon)' }, { num: 2, jp: 'ã«ã•ã¤', reading: 'nisatsu', kanjiFull: 'äºŒå†Š' }, { num: 3, jp: 'ã•ã‚“ã•ã¤', reading: 'sansatsu', kanjiFull: 'ä¸‰å†Š' }, { num: 4, jp: 'ã‚ˆã‚“ã•ã¤', reading: 'yonsatsu', kanjiFull: 'å››å†Š' }, { num: 5, jp: 'ã”ã•ã¤', reading: 'gosatsu', kanjiFull: 'äº”å†Š' }, { num: 6, jp: 'ã‚ãã•ã¤', reading: 'rokusatsu', kanjiFull: 'å…­å†Š' }, { num: 7, jp: 'ãªãªã•ã¤', reading: 'nanasatsu', kanjiFull: 'ä¸ƒå†Š' }, { num: 8, jp: 'ã¯ã£ã•ã¤', reading: 'hassatsu', kanjiFull: 'å…«å†Š', note: 'Ã‚m ngáº¯t (Sokuon)' }, { num: 9, jp: 'ãã‚…ã†ã•ã¤', reading: 'kyuusatsu', kanjiFull: 'ä¹å†Š' }, { num: 10, jp: 'ã˜ã‚…ã£ã•ã¤', reading: 'jussatsu', kanjiFull: 'åå†Š', note: 'Ã‚m ngáº¯t (Sokuon)' }] },
			'soku': { kanji: 'è¶³', reading: 'ãã', question: 'ä½•è¶³ (ãªã‚“ãã)', description: 'GiÃ y, dÃ©p, táº¥t (theo Ä‘Ã´i)', examples: 'DÃ¹ng cho nhá»¯ng váº­t Ä‘i á»Ÿ chÃ¢n vÃ  cÃ³ Ä‘Ã´i.', icon: `<i class="fas fa-socks"></i>`, counts: [{ num: 1, jp: 'ã„ã£ãã', reading: 'issoku', kanjiFull: 'ä¸€è¶³', note: 'Ã‚m ngáº¯t (Sokuon)' }, { num: 2, jp: 'ã«ãã', reading: 'nisoku', kanjiFull: 'äºŒè¶³' }, { num: 3, jp: 'ã•ã‚“ãã', reading: 'sanzoku', kanjiFull: 'ä¸‰è¶³', note: 'Ã‚m Ä‘á»¥c (ãã)' }, { num: 4, jp: 'ã‚ˆã‚“ãã', reading: 'yonsoku', kanjiFull: 'å››è¶³' }, { num: 5, jp: 'ã”ãã', reading: 'gosoku', kanjiFull: 'äº”è¶³' }, { num: 6, jp: 'ã‚ããã', reading: 'rokusoku', kanjiFull: 'å…­è¶³' }, { num: 7, jp: 'ãªãªãã', reading: 'nanasoku', kanjiFull: 'ä¸ƒè¶³' }, { num: 8, jp: 'ã¯ã£ãã', reading: 'hassoku', kanjiFull: 'å…«è¶³', note: 'Ã‚m ngáº¯t (Sokuon)' }, { num: 9, jp: 'ãã‚…ã†ãã', reading: 'kyuusoku', kanjiFull: 'ä¹è¶³' }, { num: 10, jp: 'ã˜ã‚…ã£ãã', reading: 'jussoku', kanjiFull: 'åè¶³', note: 'Ã‚m ngáº¯t (Sokuon)' }] },
			'hai': { kanji: 'æ¯', reading: 'ã¯ã„', question: 'ä½•æ¯ (ãªã‚“ã°ã„)', description: 'Äá»“ uá»‘ng trong váº­t chá»©a', examples: 'VÃ­ dá»¥: má»™t cá»‘c nÆ°á»›c, má»™t bÃ¡t sÃºp...', icon: `<i class="fas fa-coffee"></i>`, counts: [{ num: 1, jp: 'ã„ã£ã±ã„', reading: 'ippai', kanjiFull: 'ä¸€æ¯', note: 'Ã‚m ngáº¯t (ã£) + BÃ¡n Ä‘á»¥c (ã±ã„)' }, { num: 2, jp: 'ã«ã¯ã„', reading: 'nihai', kanjiFull: 'äºŒæ¯' }, { num: 3, jp: 'ã•ã‚“ã°ã„', reading: 'sanbai', kanjiFull: 'ä¸‰æ¯', note: 'Ã‚m Ä‘á»¥c (ã°ã„)' }, { num: 4, jp: 'ã‚ˆã‚“ã¯ã„', reading: 'yonhai', kanjiFull: 'å››æ¯' }, { num: 5, jp: 'ã”ã¯ã„', reading: 'gohai', kanjiFull: 'äº”æ¯' }, { num: 6, jp: 'ã‚ã£ã±ã„', reading: 'roppai', kanjiFull: 'å…­æ¯', note: 'Ã‚m ngáº¯t (ã£) + BÃ¡n Ä‘á»¥c (ã±ã„)' }, { num: 7, jp: 'ãªãªã¯ã„', reading: 'nanahai', kanjiFull: 'ä¸ƒæ¯' }, { num: 8, jp: 'ã¯ã£ã±ã„', reading: 'happai', kanjiFull: 'å…«æ¯', note: 'Ã‚m ngáº¯t (ã£) + BÃ¡n Ä‘á»¥c (ã±ã„)' }, { num: 9, jp: 'ãã‚…ã†ã¯ã„', reading: 'kyuuhai', kanjiFull: 'ä¹æ¯' }, { num: 10, jp: 'ã˜ã‚…ã£ã±ã„', reading: 'juppai', kanjiFull: 'åæ¯', note: 'Ã‚m ngáº¯t (ã£) + BÃ¡n Ä‘á»¥c (ã±ã„)' }] },
			'hiki': { kanji: 'åŒ¹', reading: 'ã²ã', question: 'ä½•åŒ¹ (ãªã‚“ã³ã)', description: 'Con váº­t nhá»', examples: 'VÃ­ dá»¥: chÃ³, mÃ¨o, cÃ¡, cÃ´n trÃ¹ng...', icon: `<i class="fas fa-dog"></i>`, counts: [{ num: 1, jp: 'ã„ã£ã´ã', reading: 'ippiki', kanjiFull: 'ä¸€åŒ¹', note: 'Ã‚m ngáº¯t (ã£) + BÃ¡n Ä‘á»¥c (ã´ã)' }, { num: 2, jp: 'ã«ã²ã', reading: 'nihiki', kanjiFull: 'äºŒåŒ¹' }, { num: 3, jp: 'ã•ã‚“ã³ã', reading: 'sanbiki', kanjiFull: 'ä¸‰åŒ¹', note: 'Ã‚m Ä‘á»¥c (ã³ã)' }, { num: 4, jp: 'ã‚ˆã‚“ã²ã', reading: 'yonhiki', kanjiFull: 'å››åŒ¹' }, { num: 5, jp: 'ã”ã²ã', reading: 'gohiki', kanjiFull: 'äº”åŒ¹' }, { num: 6, jp: 'ã‚ã£ã´ã', reading: 'roppiki', kanjiFull: 'å…­åŒ¹', note: 'Ã‚m ngáº¯t (ã£) + BÃ¡n Ä‘á»¥c (ã´ã)' }, { num: 7, jp: 'ãªãªã²ã', reading: 'nanahiki', kanjiFull: 'ä¸ƒåŒ¹' }, { num: 8, jp: 'ã¯ã£ã´ã', reading: 'happiki', kanjiFull: 'å…«åŒ¹', note: 'Ã‚m ngáº¯t (ã£) + BÃ¡n Ä‘á»¥c (ã´ã)' }, { num: 9, jp: 'ãã‚…ã†ã²ã', reading: 'kyuuhiki', kanjiFull: 'ä¹åŒ¹' }, { num: 10, jp: 'ã˜ã‚…ã£ã´ã', reading: 'juppiki', kanjiFull: 'ååŒ¹', note: 'Ã‚m ngáº¯t (ã£) + BÃ¡n Ä‘á»¥c (ã´ã)' }] },
			'kai_floor': { kanji: 'éš', reading: 'ã‹ã„', question: 'ä½•éš (ãªã‚“ãŒã„)', description: 'Táº§ng cá»§a tÃ²a nhÃ ', examples: 'DÃ¹ng Ä‘á»ƒ há»i hoáº·c tráº£ lá»i vá» sá»‘ táº§ng.', icon: `<i class="fas fa-building"></i>`, counts: [{ num: 1, jp: 'ã„ã£ã‹ã„', reading: 'ikkai', kanjiFull: 'ä¸€éš', note: 'Ã‚m ngáº¯t (Sokuon)' }, { num: 2, jp: 'ã«ã‹ã„', reading: 'nikai', kanjiFull: 'äºŒéš' }, { num: 3, jp: 'ã•ã‚“ãŒã„', reading: 'sangai', kanjiFull: 'ä¸‰éš', note: 'Ã‚m Ä‘á»¥c (ãŒã„)' }, { num: 4, jp: 'ã‚ˆã‚“ã‹ã„', reading: 'yonkai', kanjiFull: 'å››éš' }, { num: 5, jp: 'ã”ã‹ã„', reading: 'gokai', kanjiFull: 'äº”éš' }, { num: 6, jp: 'ã‚ã£ã‹ã„', reading: 'rokkai', kanjiFull: 'å…­éš', note: 'Ã‚m ngáº¯t (Sokuon)' }, { num: 7, jp: 'ãªãªã‹ã„', reading: 'nanakai', kanjiFull: 'ä¸ƒéš' }, { num: 8, jp: 'ã¯ã£ã‹ã„', reading: 'hakkai', kanjiFull: 'å…«éš', note: 'Ã‚m ngáº¯t (Sokuon)' }, { num: 9, jp: 'ãã‚…ã†ã‹ã„', reading: 'kyuukai', kanjiFull: 'ä¹éš' }, { num: 10, jp: 'ã˜ã‚…ã£ã‹ã„', reading: 'jukkai', kanjiFull: 'åéš', note: 'Ã‚m ngáº¯t (Sokuon)' }] },
			'jikan': { kanji: 'æ™‚é–“', reading: 'ã˜ã‹ã‚“', question: 'ä½•æ™‚é–“ (ãªã‚“ã˜ã‹ã‚“)', description: 'Thá»i gian (sá»‘ giá»)', examples: 'DÃ¹ng Ä‘á»ƒ chá»‰ má»™t khoáº£ng thá»i gian tÃ­nh báº±ng giá».', icon: `<i class="fas fa-clock"></i>`, counts: [{ num: 1, jp: 'ã„ã¡ã˜ã‹ã‚“', reading: 'ichijikan', kanjiFull: 'ä¸€æ™‚é–“' }, { num: 2, jp: 'ã«ã˜ã‹ã‚“', reading: 'nijikan', kanjiFull: 'äºŒæ™‚é–“' }, { num: 3, jp: 'ã•ã‚“ã˜ã‹ã‚“', reading: 'sanjikan', kanjiFull: 'ä¸‰æ™‚é–“' }, { num: 4, jp: 'ã‚ˆã˜ã‹ã‚“', reading: 'yojikan', kanjiFull: 'å››æ™‚é–“', note: 'CÃ¡ch Ä‘á»c Ä‘áº·c biá»‡t (khÃ´ng pháº£i ã‚ˆã‚“ã˜ã‹ã‚“)' }, { num: 5, jp: 'ã”ã˜ã‹ã‚“', reading: 'gojikan', kanjiFull: 'äº”æ™‚é–“' }, { num: 6, jp: 'ã‚ãã˜ã‹ã‚“', reading: 'rokujikan', kanjiFull: 'å…­æ™‚é–“' }, { num: 7, jp: 'ã—ã¡ã˜ã‹ã‚“', reading: 'shichijikan', kanjiFull: 'ä¸ƒæ™‚é–“' }, { num: 8, jp: 'ã¯ã¡ã˜ã‹ã‚“', reading: 'hachijikan', kanjiFull: 'å…«æ™‚é–“' }, { num: 9, jp: 'ãã˜ã‹ã‚“', reading: 'kujikan', kanjiFull: 'ä¹æ™‚é–“', note: 'CÃ¡ch Ä‘á»c Ä‘áº·c biá»‡t (khÃ´ng pháº£i ãã‚…ã†ã˜ã‹ã‚“)' }, { num: 10, jp: 'ã˜ã‚…ã†ã˜ã‹ã‚“', reading: 'juujikan', kanjiFull: 'åæ™‚é–“' }] },
			'ko': { kanji: 'å€‹', reading: 'ã“', question: 'ä½•å€‹ (ãªã‚“ã“)', description: 'Váº­t nhá», trÃ²n, khá»‘i', examples: 'VÃ­ dá»¥: káº¹o, cá»¥c táº©y, trá»©ng, tÃ¡o...', icon: `<i class="fas fa-apple-alt"></i>`, counts: [{ num: 1, jp: 'ã„ã£ã“', reading: 'ikko', kanjiFull: 'ä¸€å€‹', note: 'Ã‚m ngáº¯t (Sokuon)' }, { num: 2, jp: 'ã«ã“', reading: 'niko', kanjiFull: 'äºŒå€‹' }, { num: 3, jp: 'ã•ã‚“ã“', reading: 'sanko', kanjiFull: 'ä¸‰å€‹' }, { num: 4, jp: 'ã‚ˆã‚“ã“', reading: 'yonko', kanjiFull: 'å››å€‹' }, { num: 5, jp: 'ã”ã“', reading: 'goko', kanjiFull: 'äº”å€‹' }, { num: 6, jp: 'ã‚ã£ã“', reading: 'rokko', kanjiFull: 'å…­å€‹', note: 'Ã‚m ngáº¯t (Sokuon)' }, { num: 7, jp: 'ãªãªã“', reading: 'nanako', kanjiFull: 'ä¸ƒå€‹' }, { num: 8, jp: 'ã¯ã£ã“', reading: 'hakko', kanjiFull: 'å…«å€‹', note: 'Ã‚m ngáº¯t (Sokuon)' }, { num: 9, jp: 'ãã‚…ã†ã“', reading: 'kyuuko', kanjiFull: 'ä¹å€‹' }, { num: 10, jp: 'ã˜ã‚…ã£ã“', reading: 'jukko', kanjiFull: 'åå€‹', note: 'Ã‚m ngáº¯t (Sokuon)' }] },
		};

		// --- SCRIPT TO HANDLE INTERACTIONS ---
		document.addEventListener('DOMContentLoaded', () => {
			// Generate stars background
			function createStars() {
				const starsContainer = document.getElementById('stars');
				if (!starsContainer) return;
				starsContainer.innerHTML = '';
				const starsCount = 150;

				for (let i = 0; i < starsCount; i++) {
					const star = document.createElement('div');
					star.classList.add('star');
					const top = Math.random() * 100;
					const left = Math.random() * 100;
					star.style.top = `${top}%`;
					star.style.left = `${left}%`;
					const size = Math.random() * 3;
					star.style.width = `${size}px`;
					star.style.height = `${size}px`;
					star.style.opacity = Math.random() * 0.8 + 0.2;
					star.style.animationDelay = `${Math.random() * 5}s`;
					starsContainer.appendChild(star);
				}
			}
			createStars();

			const mainTabs = document.getElementById('main-tabs');
			const theoryContent = document.getElementById('theory-content');
			const tipsContent = document.getElementById('tips-content');
			const practiceContent = document.getElementById('practice-content');
			const counterGrid = document.getElementById('counter-grid');
			const modal = document.getElementById('modal');
			const modalContent = document.getElementById('modal-content');
			const modalHeader = document.getElementById('modal-header');
			const modalTabs = document.getElementById('modal-tabs');
			const listView = document.getElementById('list-view');
			const flashcardView = document.getElementById('flashcard-view');
			const closeModalBtn = document.getElementById('close-modal-btn');
			const settingsBtn = document.getElementById('flashcard-settings-btn');
			const exerciseContainer = document.getElementById('exercise-container');
			const progressBar = document.getElementById('progress-bar');
			const progressText = document.getElementById('progress-text');
			const resetBtn = document.getElementById('reset-btn');
			const themeToggle = document.getElementById('theme-toggle');

			let currentCardIndex = 0;
			let currentCounterData = null;
			let flashcardSettings = { front: 'japanese', back: 'vietnamese' };
			let exerciseData = [];
			let completedExercises = 0;
			let isDarkMode = true;

			// Theme toggle
			themeToggle.addEventListener('click', () => {
				isDarkMode = !isDarkMode;
				document.body.classList.toggle('dark', isDarkMode);
				document.body.classList.toggle('light', !isDarkMode);
				themeToggle.innerHTML = isDarkMode
					? '<i class="fas fa-moon mr-2"></i>Cháº¿ Ä‘á»™ tá»‘i'
					: '<i class="fas fa-sun mr-2"></i>Cháº¿ Ä‘á»™ sÃ¡ng';
			});

			// 1. Generate theory cards
			Object.keys(countersData).forEach(key => {
				const counter = countersData[key];
				const card = document.createElement('div');
				card.className = 'galaxy-card rounded-xl shadow-lg p-6 flex flex-col cursor-pointer';
				card.dataset.counterKey = key;
				card.innerHTML = `<div class="flex items-start gap-4"><div class="card-icon">${counter.icon}</div><div class="flex-1"><div class="mb-2"><div class="flex flex-wrap items-baseline gap-x-3 gap-y-1"><h3 class="text-3xl font-bold galaxy-primary jp-font">${counter.kanji}</h3><span class="text-lg font-medium text-indigo-300 jp-font">${counter.reading}</span><span class="text-lg font-bold text-purple-400 jp-font">${counter.question}</span></div></div><p class="text-indigo-200 font-semibold">${counter.description}</p><p class="text-xs text-indigo-300 mt-1">${counter.examples}</p></div></div>`;
				counterGrid.appendChild(card);
			});

			// 2. Modal Logic
			const openModal = (key) => {
				currentCounterData = countersData[key];
				if (!currentCounterData) return;
				modalHeader.innerHTML = `<div class="flex items-center gap-4"><div class="modal-icon galaxy-primary">${currentCounterData.icon}</div><div><h3 class="text-2xl font-bold galaxy-primary jp-font">${currentCounterData.kanji} <span class="text-lg font-medium text-indigo-300 jp-font">${currentCounterData.reading}</span></h3><p class="text-sm text-indigo-300">Tá»« Ä‘á»ƒ há»i: <span class="jp-font font-semibold">${currentCounterData.question}</span></p></div></div>`;
				renderListView(currentCounterData);
				renderFlashcardView();
				currentCardIndex = 0;
				updateFlashcardContent(currentCardIndex);
				switchModalView('list');
				modal.classList.remove('hidden');
				setTimeout(() => { modal.classList.remove('opacity-0'); modalContent.classList.remove('scale-95'); }, 10);
			};
			const closeModal = () => {
				modal.classList.add('opacity-0');
				modalContent.classList.add('scale-95');
				setTimeout(() => { modal.classList.add('hidden'); }, 300);
			};

			// HÃ€M RENDER DANH SÃCH Tá»ª (ÄÃƒ Cáº¬P NHáº¬T)
			const renderListView = (data) => {
				let tableRows = data.counts.map(c =>
					`<tr class="${c.note ? 'highlight' : ''}">
                     <td class="py-3 px-4 text-center font-semibold text-indigo-200">${c.num}</td>
                     <td class="py-3 px-4 jp-font text-lg text-center">
                         <ruby>${c.kanjiFull}<rt>${c.jp}</rt></ruby>
                     </td>
                     <td class="py-3 px-4 text-xs note">${c.note || ''}</td>
                 </tr>`
				).join('');

				listView.innerHTML = `
                 <div class="overflow-hidden border border-indigo-700 rounded-lg">
                     <table class="w-full text-left table-fixed">
                         <thead class="bg-indigo-900/30 text-indigo-200 text-sm">
                             <tr>
                                 <th class="py-2 px-4 text-center w-[15%]">Sá»‘</th>
                                 <th class="py-2 px-4 text-center w-[50%]">Tá»« vá»±ng (HÃ¡n tá»±)</th>
                                 <th class="py-2 px-4 w-[35%]">Ghi chÃº</th>
                             </tr>
                         </thead>
                         <tbody class="divide-y divide-indigo-800">${tableRows}</tbody>
                     </table>
                 </div>`;
			};

			const renderFlashcardView = () => {
				flashcardView.innerHTML = `<div class="perspective-container h-52"><div id="flashcard" class="flashcard relative w-full h-full cursor-pointer"><div id="flashcard-front" class="flashcard-face absolute w-full h-full"></div><div id="flashcard-back" class="flashcard-back flashcard-face absolute w-full h-full"></div></div></div><div class="flex justify-between items-center mt-6"><button id="prev-card-btn" class="bg-indigo-900/50 hover:bg-indigo-800 font-bold py-2 px-5 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed">&lt; TrÆ°á»›c</button><span id="card-counter" class="font-semibold text-indigo-200"></span><button id="next-card-btn" class="bg-indigo-900/50 hover:bg-indigo-800 font-bold py-2 px-5 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Sau &gt;</button></div>`;
				document.getElementById('flashcard').addEventListener('click', () => { document.getElementById('flashcard').classList.toggle('is-flipped'); });
				document.getElementById('prev-card-btn').addEventListener('click', showPrevCard);
				document.getElementById('next-card-btn').addEventListener('click', showNextCard);
			};

			// --- HÃ€M UPDATE FLASHCARD ---
			const updateFlashcardContent = (index) => {
				if (!currentCounterData) return;
				const cardData = currentCounterData.counts[index];
				const front = document.getElementById('flashcard-front');
				const back = document.getElementById('flashcard-back');
				const counter = document.getElementById('card-counter');

				const japaneseContent = `<div class="main-text text-5xl font-bold jp-font leading-tight text-center"><ruby>${cardData.kanjiFull}<rt>${cardData.jp}</rt></ruby></div> ${cardData.note ? `<span class="note-lozenge">${cardData.note}</span>` : ''}`;
				const vietnameseContent = `<div class="main-text text-center"><span class="text-7xl font-bold">${cardData.num}</span><span class="text-xl mt-2 block">${currentCounterData.description}</span></div>`;

				front.innerHTML = flashcardSettings.front === 'japanese' ? japaneseContent : vietnameseContent;
				back.innerHTML = flashcardSettings.back === 'japanese' ? japaneseContent : vietnameseContent;

				counter.textContent = `${index + 1} / ${currentCounterData.counts.length}`;
				document.getElementById('prev-card-btn').disabled = index === 0;
				document.getElementById('next-card-btn').disabled = index === currentCounterData.counts.length - 1;
				document.getElementById('flashcard').classList.remove('is-flipped');
			};

			const updateSettings = () => {
				const frontValue = document.querySelector('input[name="front-view"]:checked').value;
				const backValue = document.querySelector('input[name="back-view"]:checked').value;
				if (frontValue === backValue) {
					if (event.target.name === 'front-view') {
						const newBackValue = frontValue === 'japanese' ? 'vietnamese' : 'japanese';
						document.querySelector(`input[name="back-view"][value="${newBackValue}"]`).checked = true;
					} else {
						const newFrontValue = backValue === 'japanese' ? 'vietnamese' : 'japanese';
						document.querySelector(`input[name="front-view"][value="${newFrontValue}"]`).checked = true;
					}
				}
				flashcardSettings.front = document.querySelector('input[name="front-view"]:checked').value;
				flashcardSettings.back = document.querySelector('input[name="back-view"]:checked').value;
				updateFlashcardContent(currentCardIndex);
			};
			const showNextCard = () => { if (currentCardIndex < currentCounterData.counts.length - 1) { currentCardIndex++; updateFlashcardContent(currentCardIndex); } };
			const showPrevCard = () => { if (currentCardIndex > 0) { currentCardIndex--; updateFlashcardContent(currentCardIndex); } };
			const switchModalView = (viewName) => {
				const isList = viewName === 'list';
				listView.classList.toggle('hidden', !isList);
				flashcardView.classList.toggle('hidden', isList);
				settingsBtn.classList.toggle('hidden', isList);
				document.querySelector('#modal-tabs [data-view="list"]').classList.toggle('active', isList);
				document.querySelector('#modal-tabs [data-view="flashcard"]').classList.toggle('active', !isList);
			};

			// 3. Main View Logic
			const switchMainView = (viewName) => {
				document.querySelectorAll('#main-tabs .tab-btn').forEach(btn => btn.classList.remove('active'));
				document.querySelector(`[data-main-view="${viewName}"]`).classList.add('active');
				theoryContent.classList.toggle('hidden', viewName !== 'theory');
				tipsContent.classList.toggle('hidden', viewName !== 'tips');
				practiceContent.classList.toggle('hidden', viewName !== 'practice');
				if (viewName === 'practice') generateExercises();
			};

			// 4. Exercise Logic
			function generateExercises() {
				exerciseContainer.innerHTML = '';
				exerciseData = [];
				completedExercises = 0;
				updateProgress();
				const counterKeys = Object.keys(countersData);
				let selectedExercises = [];
				while (selectedExercises.length < 10) {
					const randomKey = counterKeys[Math.floor(Math.random() * counterKeys.length)];
					const counter = countersData[randomKey];
					const randomNumIndex = Math.floor(Math.random() * counter.counts.length);
					const countItem = counter.counts[randomNumIndex];
					const exercise = { counterKey: randomKey, answer: countItem.reading, jpAnswer: countItem.jp };
					if (!selectedExercises.some(ex => ex.counterKey === exercise.counterKey && ex.number === countItem.num)) {
						exercise.number = countItem.num;
						selectedExercises.push(exercise);
					}
				}
				exerciseData = selectedExercises;
				selectedExercises.forEach((ex, index) => renderExercise(ex, index));
			}

			function renderExercise(exercise, index) {
				const counter = countersData[exercise.counterKey];
				const exerciseCard = document.createElement('div');
				exerciseCard.className = 'exercise-card galaxy-card rounded-xl p-5';
				exerciseCard.innerHTML = `<div class="flex items-start gap-3 mb-4"><div class="card-icon !w-10 !h-10 !text-xl">${counter.icon}</div><div><h4 class="font-bold text-indigo-200">${counter.kanji} (${counter.reading})</h4><p class="text-lg font-bold galaxy-primary mt-1">${exercise.number} ${counter.description}</p></div></div><div class="mb-4"><label class="block text-sm font-medium text-indigo-200 mb-1">CÃ¡ch Ä‘á»c (Romaji):</label><input type="text" class="w-full px-4 py-2 bg-slate-800/50 border border-indigo-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition text-white" placeholder="Nháº­p cÃ¡ch Ä‘á»c..." data-answer-input></div><div class="flex items-center justify-between"><button class="galaxy-button font-medium py-2 px-4 rounded-lg" data-check-btn>Kiá»ƒm tra</button><div class="result flex items-center gap-2 hidden" data-result-container><div class="result-icon" data-result-icon></div><span class="text-sm font-bold" data-result-text></span></div></div><div class="mt-4 text-sm hidden bg-slate-800/50 p-3 rounded-md" data-answer-details><p><span class="font-medium">ÄÃ¡p Ã¡n Ä‘Ãºng:</span> <span class="jp-font font-bold text-green-400">${exercise.jpAnswer}</span></p><p><span class="font-medium">Romaji:</span> <span class="font-bold text-green-400">${exercise.answer}</span></p></div>`;
				exerciseContainer.appendChild(exerciseCard);
				const checkBtn = exerciseCard.querySelector('[data-check-btn]');
				const answerInput = exerciseCard.querySelector('[data-answer-input]');
				checkBtn.addEventListener('click', () => checkAnswer(exerciseCard, exercise));
				answerInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') checkAnswer(exerciseCard, exercise); });
			}

			function checkAnswer(exerciseCard, exercise) {
				const checkBtn = exerciseCard.querySelector('[data-check-btn]');
				if (checkBtn.disabled) return;
				const answerInput = exerciseCard.querySelector('[data-answer-input]');
				const resultContainer = exerciseCard.querySelector('[data-result-container]');
				const resultIcon = exerciseCard.querySelector('[data-result-icon]');
				const resultText = exerciseCard.querySelector('[data-result-text]');
				const answerDetails = exerciseCard.querySelector('[data-answer-details]');
				const userAnswer = answerInput.value.trim().toLowerCase();
				if (!userAnswer) return;

				exercise.attempted = true;

				if (userAnswer === exercise.answer.toLowerCase()) {
					resultIcon.innerHTML = '<i class="fas fa-check text-white"></i>'; resultIcon.className = 'result-icon bg-green-500';
					resultText.textContent = 'ChÃ­nh xÃ¡c!'; resultText.className = 'text-sm font-bold text-green-400';
					exercise.correct = true; exerciseCard.classList.add('border-green-500');
				} else {
					resultIcon.innerHTML = '<i class="fas fa-times text-white"></i>'; resultIcon.className = 'result-icon bg-red-500';
					resultText.textContent = 'ChÆ°a chÃ­nh xÃ¡c'; resultText.className = 'text-sm font-bold text-red-400';
					exercise.correct = false; exerciseCard.classList.add('border-red-500');
					answerDetails.classList.remove('hidden');
				}
				resultContainer.classList.remove('hidden');
				checkBtn.disabled = true;
				answerInput.disabled = true;
				updateProgress();
			}

			function updateProgress() {
				const correctCount = exerciseData.filter(ex => ex.correct === true).length;
				const attemptedCount = exerciseData.filter(ex => ex.attempted === true).length;
				const progressPercentage = (attemptedCount / 10) * 100;

				progressBar.style.width = `${progressPercentage}%`;
				progressText.textContent = `${attemptedCount}/10`;

				if (attemptedCount < 10) {
					progressBar.className = 'progress-bar bg-indigo-500 h-2.5 rounded-full';
				} else {
					const scorePercentage = (correctCount / 10) * 100;
					if (scorePercentage < 40) progressBar.className = 'progress-bar bg-red-500 h-2.5 rounded-full';
					else if (scorePercentage < 70) progressBar.className = 'progress-bar bg-yellow-500 h-2.5 rounded-full';
					else progressBar.className = 'progress-bar bg-green-500 h-2.5 rounded-full';
					progressText.textContent = `Äiá»ƒm: ${correctCount}/10`;
				}
			}
			resetBtn.addEventListener('click', generateExercises);

			// --- Event Listeners ---
			mainTabs.addEventListener('click', (e) => { if (e.target.matches('button')) switchMainView(e.target.dataset.mainView); });
			counterGrid.addEventListener('click', (e) => { const card = e.target.closest('[data-counter-key]'); if (card) openModal(card.dataset.counterKey); });
			modalTabs.addEventListener('click', (e) => { if (e.target.matches('button')) switchModalView(e.target.dataset.view); });
			closeModalBtn.addEventListener('click', closeModal);
			settingsBtn.addEventListener('click', (e) => { e.stopPropagation(); document.getElementById('flashcard-settings-panel').classList.toggle('hidden'); });
			document.querySelectorAll('input[name="front-view"], input[name="back-view"]').forEach(radio => { radio.addEventListener('change', updateSettings); });
			modal.addEventListener('click', (e) => { if (e.target.id === 'modal') closeModal(); });
			document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && !modal.classList.contains('hidden')) closeModal(); });
			document.body.addEventListener('click', (e) => {
				const settingsPanel = document.getElementById('flashcard-settings-panel');
				if (settingsPanel && !settingsPanel.classList.contains('hidden') && !settingsPanel.contains(e.target) && !settingsBtn.contains(e.target)) {
					settingsPanel.classList.add('hidden');
				}
			});
		});
	</script>
</body>

</html>