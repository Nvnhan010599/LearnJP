<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Há»c Tá»« Vá»±ng Tiáº¿ng Nháº­t (Cloud Version)</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    
</head>
<body>
    <div class="container">
        <header>
            <div class="header-nav">
                <a href="../index.html" class="back-to-home">&larr; Quay láº¡i trang chá»§</a>
            </div>

            <div class="header-top">
                <h1>ğŸ“š Há»c Tá»« Vá»±ng Tiáº¿ng Nháº­t</h1>
                <div id="user-menu-container"></div>
            </div>
            <p>Äá»“ng bá»™ tiáº¿n trÃ¬nh há»c cá»§a báº¡n trÃªn má»i thiáº¿t bá»‹</p>
        </header>
        
        <!-- === UPDATED SECTION: File Upload Controls === -->
        <div class="main-controls">
            <input type="file" id="excelFile" accept=".xlsx" class="file-input">
            
            <!-- NÃºt nÃ y sáº½ thá»±c hiá»‡n chá»©c nÄƒng GHI ÄÃˆ (nhÆ° cÅ©) -->
            <button id="uploadOverwriteBtn" class="file-label">ğŸ“‚ Táº£i lÃªn & Ghi Ä‘Ã¨</button>
            
            <!-- NÃºt nÃ y sáº½ thá»±c hiá»‡n chá»©c nÄƒng Bá»” SUNG (má»›i) -->
            <button id="uploadAppendBtn" class="file-label append">â• Bá»• sung tá»« Excel</button>
        </div>
        <!-- === END UPDATED SECTION === -->


        <div class="lesson-controls">
            <select id="lessonSelect" onchange="onLessonChange()" disabled>
                <option value="">-- Chá»n bÃ i há»c --</option>
            </select>
            
            <select id="quizMode" onchange="onQuizModeChange()">
                <option value="multipleChoice">Tráº¯c nghiá»‡m</option>
                <option value="input">Nháº­p nghÄ©a</option>
            </select>
            
            <select id="direction" onchange="onDirectionChange()" style="display: none;">
                <option value="jpToVn">Nháº­t â” Viá»‡t</option>
                <option value="vnToJp">Viá»‡t â” Nháº­t</option>
            </select>
        </div>

        <div id="stats">
            <h3 id="statsTitle">ğŸ“Š Thá»‘ng kÃª</h3>
            <div id="backButtonContainer"></div>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-label">Tá»•ng cá»™ng</span>
                    <span id="totalWords" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ÄÃ£ thuá»™c</span>
                    <span id="learnedWords" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Äang há»c</span>
                    <span id="learningWords" class="stat-value">0</span>
                </div>
                 <div class="stat-item">
                    <span class="stat-label">ChÆ°a há»c</span>
                    <span id="newWords" class="stat-value">0</span>
                </div>
            </div>
        </div>

        <div id="cardContainer">
             <p class="placeholder-text">Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ báº¯t Ä‘áº§u há»c vÃ  Ä‘á»“ng bá»™ tiáº¿n trÃ¬nh cá»§a báº¡n.</p>
        </div>

        <footer>
             <button onclick="exportData()" class="footer-btn">ğŸ“¤ Xuáº¥t dá»¯ liá»‡u</button>
             <input type="file" id="importFile" accept=".json" hidden>
             <button onclick="document.getElementById('importFile').click()" class="footer-btn">ğŸ“¥ Nháº­p dá»¯ liá»‡u</button>
        </footer>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <!-- Khá»Ÿi táº¡o Firebase -->
    <script>
      // QUAN TRá»ŒNG: Thay tháº¿ cÃ¡c giÃ¡ trá»‹ dÆ°á»›i Ä‘Ã¢y báº±ng cáº¥u hÃ¬nh Firebase cá»§a báº¡n
      const firebaseConfig = {
        apiKey: "AIzaSyAFQSdwL6wukhwCVBzZT7IWDTjY9TxdfHM",
        authDomain: "hoc-tieng-nhat-app.firebaseapp.com",
        projectId: "hoc-tieng-nhat-app",
        storageBucket: "hoc-tieng-nhat-app.firebasestorage.app",
        messagingSenderId: "415468899123",
        appId: "1:415468899123:web:c9c43b12ad28ce172d8c46"
      };

      // Khá»Ÿi táº¡o Firebase vÃ  cÃ¡c dá»‹ch vá»¥
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
      const db = firebase.firestore();
    </script>

    <!-- ThÆ° viá»‡n Ä‘á»c file Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.5/xlsx.full.min.js"></script>
    
    <!-- File logic chÃ­nh cá»§a á»©ng dá»¥ng -->
    <script src="app.js"></script>
</body>
</html>
