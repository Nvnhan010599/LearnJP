<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài 11 - Từ vựng</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Helvetica Neue', Arial, sans-serif; }
        .japanese-text, h1, h2, h3, .main-tab { font-family: 'Noto Sans JP', sans-serif; }
        .main-tab.active { color: #2563eb; border-color: #2563eb; background-color: #eff6ff; }
        .main-tab { transition: color 0.2s, border-color 0.2s, background-color 0.2s; }

        /* Collapse/Expand styles */
        .collapsible-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out; }
        .collapsible-toggle .arrow-icon { transition: transform 0.3s ease-in-out; }
        .collapsible-toggle.expanded .arrow-icon { transform: rotate(180deg); }

        /* Kanji Toggle Switch Styles */
        .kanji-col { display: none; }
        #vocab-table.show-kanji .kanji-col { display: table-cell; }

        /* Flashcard styles */
        #flashcard { perspective: 1000px; }
        #flashcard-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
        #flashcard.is-flipped #flashcard-inner { transform: rotateY(180deg); }
        .flashcard-face { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; border-radius: 0.75rem; }
        .flashcard-front { background: white; border: 2px solid #e5e7eb; }
        .flashcard-back { background: #dbeafe; transform: rotateY(180deg); }

        /* Quiz styles */
        .quiz-option { transition: background-color 0.2s; }
        .quiz-option.correct { background-color: #22c55e; color: white; border-color: #16a34a; }
        .quiz-option.incorrect { background-color: #ef4444; color: white; border-color: #dc2626;}
        .quiz-option:disabled { opacity: 0.8; cursor: not-allowed; }
        
        /* Mobile menu */
        .mobile-menu-btn { display: none; }
        
        /* Learned words */
        .vocab-row.learned { background-color: #f0fdf4; }
        .vocab-row.learned td { text-decoration: line-through; color: #65a30d; }
        
        /* Search bar */
        .search-container { position: relative; }
        .search-icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #9ca3af; }
        
        @media (max-width: 768px) {
            .main-tab { font-size: 14px; padding: 8px 4px; }
            .mobile-menu-btn { display: block; }
            .desktop-tabs { display: none; }
            .mobile-tabs { display: flex; }
            .flashcard-face { font-size: 1.5rem; }
            #flashcard { height: 200px; }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">
    <div class="container mx-auto max-w-4xl p-4 sm:p-8">
        <header class="mb-6 flex items-center justify-between">
            <div class="w-1/4 text-left">
                 <a href="../curriculum.html" class="text-blue-600 hover:text-blue-800 font-semibold transition-colors whitespace-nowrap">
                    &larr; Quay lại
                </a>
            </div>
            <div class="w-1/2 text-center">
                <h1 class="text-2xl md:text-3xl font-bold text-red-700 japanese-text">
                    Bài 11: Cách đếm người, đồ vật
                </h1>
            </div>
            <div class="w-1/4"></div>
        </header>

        <!-- Mobile Menu Button -->
        <button id="mobile-menu-btn" class="mobile-menu-btn w-full mb-4 py-2 bg-blue-500 text-white rounded-lg md:hidden">
            <i class="fas fa-bars mr-2"></i> Menu
        </button>

        <!-- Main Navigation Tabs - Mobile -->
        <div id="mobile-tabs" class="mobile-tabs mb-4 hidden flex-wrap gap-2">
            <a href="lesson_11_kanji.html" class="main-tab text-gray-500 py-2 px-4 rounded-lg bg-gray-100 font-medium">
                Kanji
            </a>
            <a href="lesson_11_vocabulary.html" class="main-tab active text-white py-2 px-4 rounded-lg bg-blue-500 font-medium">
                Từ vựng
            </a>
            <a href="lesson_11_grammar.html" class="main-tab text-gray-500 py-2 px-4 rounded-lg bg-gray-100 font-medium">
                Ngữ pháp
            </a>
            <a href="lesson_11_kaiwa.html" class="main-tab text-gray-500 py-2 px-4 rounded-lg bg-gray-100 font-medium">
                Hội thoại
            </a>
            <a href="lesson_11_practice.html" class="main-tab text-gray-500 py-2 px-4 rounded-lg bg-gray-100 font-medium">
                Bài tập
            </a>
        </div>

        <!-- Main Navigation Tabs - Desktop -->
        <div class="mb-8 border-b-2 border-gray-200 sticky top-0 bg-gray-100 z-10 desktop-tabs">
             <nav class="flex -mb-px" aria-label="Tabs">
                 <a href="lesson_11_kanji.html" class="main-tab text-gray-500 w-1/5 py-4 px-1 text-center border-b-2 font-medium text-lg">
                    Kanji
                </a>
                <a href="lesson_11_vocabulary.html" class="main-tab active text-gray-500 w-1/5 py-4 px-1 text-center border-b-2 font-medium text-lg">
                    Từ vựng
                </a>
                <a href="lesson_11_grammar.html" class="main-tab text-gray-500 w-1/5 py-4 px-1 text-center border-b-2 font-medium text-lg">
                    Ngữ pháp
                </a>
                <a href="lesson_11_kaiwa.html" class="main-tab text-gray-500 w-1/5 py-4 px-1 text-center border-b-2 font-medium text-lg">
                    Hội thoại
                </a>
                <a href="lesson_11_practice.html" class="main-tab text-gray-500 w-1/5 py-4 px-1 text-center border-b-2 font-medium text-lg">
                    Bài tập
                </a>
            </nav>
        </div>

        <main>
            <section class="bg-white p-4 sm:p-6 rounded-lg shadow-md mb-6">
                <div class="collapsible-toggle flex justify-between items-center cursor-pointer">
                    <h2 class="text-2xl font-bold text-gray-800 japanese-text">ことば (Từ vựng)</h2>
                    <svg class="arrow-icon w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
                <div class="collapsible-content border-t mt-4 pt-4">
                    <div class="flex flex-col sm:flex-row justify-between items-center mb-4 gap-3">
                        <div class="search-container w-full sm:w-1/2">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" id="vocab-search" placeholder="Tìm từ vựng..." class="w-full pl-10 py-2 border rounded-lg">
                        </div>
                        <div class="flex gap-2">
                            <button id="kanji-toggle-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg text-sm transition-colors">
                                <i class="fas fa-kanji mr-1"></i> Hiện Kanji
                            </button>
                            <button id="reset-learned" class="bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg text-sm transition-colors">
                                <i class="fas fa-sync mr-1"></i> Reset
                            </button>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table id="vocab-table" class="min-w-full bg-white">
                             <thead class="bg-gray-200">
                                <tr>
                                    <th class="py-2 px-4 text-left">Hiragana</th>
                                    <th class="py-2 px-4 text-left kanji-col">Kanji</th>
                                    <th class="py-2 px-4 text-left">Nghĩa</th>
                                    <th class="py-2 px-4 text-left w-20">Đã học</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Vocabulary rows will be generated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <!-- Vocabulary Practice Section -->
            <section class="bg-white p-4 sm:p-6 rounded-lg shadow-md">
                 <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center japanese-text">Luyện tập Từ vựng</h2>
                 <div class="space-y-4">
                     <!-- Flashcards -->
                     <div class="border rounded-lg">
                        <div class="collapsible-toggle flex justify-between items-center cursor-pointer p-4">
                            <h3 class="text-xl font-bold text-gray-800"><i class="fas fa-layer-group mr-2"></i> Flashcards</h3>
                            <svg class="arrow-icon w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="collapsible-content border-t">
                            <div class="p-4 bg-gray-50">
                                <div id="flashcard" class="w-full h-64 mx-auto cursor-pointer rounded-xl">
                                    <div id="flashcard-inner">
                                        <div class="flashcard-face flashcard-front flex-col items-center justify-center">
                                            <p id="flashcard-jp" class="japanese-text text-4xl font-bold"></p>
                                            <p id="flashcard-kj" class="japanese-text text-2xl text-gray-500 mt-2"></p>
                                        </div>
                                        <div class="flashcard-face flashcard-back">
                                            <p id="flashcard-vi" class="text-2xl font-semibold text-center px-4"></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center mt-4">
                                    <button id="prev-card" class="py-2 px-4 bg-gray-200 rounded-lg hover:bg-gray-300"><i class="fas fa-arrow-left mr-1"></i> Trước</button>
                                    <p id="card-counter" class="text-sm font-semibold"></p>
                                    <button id="next-card" class="py-2 px-4 bg-gray-200 rounded-lg hover:bg-gray-300">Tiếp <i class="fas fa-arrow-right ml-1"></i></button>
                                </div>
                                <div class="flex justify-center gap-3 mt-4">
                                    <button id="shuffle-cards" class="py-2 px-4 bg-blue-500 text-white rounded-lg hover:bg-blue-600"><i class="fas fa-random mr-1"></i> Xáo trộn</button>
                                    <button id="auto-flip" class="py-2 px-4 bg-green-500 text-white rounded-lg hover:bg-green-600"><i class="fas fa-sync mr-1"></i> Tự động lật</button>
                                </div>
                            </div>
                        </div>
                     </div>
                     <!-- Multiple Choice Quiz -->
                      <div class="border rounded-lg">
                        <div class="collapsible-toggle flex justify-between items-center cursor-pointer p-4">
                            <h3 class="text-xl font-bold text-gray-800"><i class="fas fa-question-circle mr-2"></i> Trắc nghiệm nhanh</h3>
                            <svg class="arrow-icon w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="collapsible-content border-t">
                            <div class="p-4 bg-gray-50">
                                <div id="quiz-question" class="text-center font-bold japanese-text mb-6 h-12 flex items-center justify-center"></div>
                                <div id="quiz-options" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                                <div class="flex justify-between items-center mt-6">
                                    <p id="quiz-score" class="font-bold text-lg"></p>
                                    <button id="next-quiz-question" class="py-2 px-5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 hidden">Câu tiếp theo <i class="fas fa-arrow-right ml-1"></i></button>
                                </div>
                            </div>
                        </div>
                     </div>
                 </div>
            </section>
        </main>
         <footer class="text-center mt-12 py-4 border-t">
            <p class="text-gray-500">Tạo bởi nvnhan, Dung Mori và Gemini</p>
        </footer>
    </div>

    <script>
        const vocabList = [
            { jp: 'こいびと', kj: '恋人', vi: 'người yêu' },
            { jp: 'あに', kj: '兄', vi: 'anh trai (mình)' },
            { jp: 'おにいさん', kj: 'お兄さん', vi: 'anh trai (người khác)' },
            { jp: 'あね', kj: '姉', vi: 'chị gái (mình)' },
            { jp: 'おねえさん', kj: 'お姉さん', vi: 'chị gái (người khác)' },
            { jp: 'おとうと', kj: '弟', vi: 'em trai (mình)' },
            { jp: 'いもうと', kj: '妹', vi: 'em gái (mình)' },
            { jp: 'きょうだい', kj: '兄弟', vi: 'anh em' },
            { jp: 'こども', kj: '子供', vi: 'trẻ con, trẻ em' },
            { jp: 'アイスクリーム', kj: '', vi: 'kem' },
            { jp: 'はがき', kj: '葉書', vi: 'bưu thiếp' },
            { jp: 'おく', kj: '奥', vi: 'bên trong cùng' },
            { jp: 'ほんだな', kj: '本棚', vi: 'giá sách' },
            { jp: 'りょう', kj: '寮', vi: 'kí túc xá' },
            { jp: 'いなか', kj: '田舎', vi: 'quê, nông thôn' },
            { jp: 'がいこく', kj: '外国', vi: 'nước ngoài' },
            { jp: 'どうぶつ', kj: '動物', vi: 'động vật' },
            { jp: 'ひるね', kj: '昼寝', vi: 'ngủ trưa' },
            { jp: 'ひとつ', kj: '一つ', vi: 'một cái' },
            { jp: 'ふたつ', kj: '二つ', vi: 'hai cái' },
            { jp: 'みっつ', kj: '三つ', vi: 'ba cái' },
            { jp: 'よっつ', kj: '四つ', vi: 'bốn cái' },
            { jp: 'いつつ', kj: '五つ', vi: 'năm cái' },
            { jp: 'むっつ', kj: '六つ', vi: 'sáu cái' },
            { jp: 'ななつ', kj: '七つ', vi: 'bảy cái' },
            { jp: 'やっつ', kj: '八つ', vi: 'tám cái' },
            { jp: 'ここのつ', kj: '九つ', vi: 'chín cái' },
            { jp: 'とお', kj: '十', vi: 'mười cái' },
            { jp: 'ひとり', kj: '一人', vi: 'một người' },
            { jp: 'ふたり', kj: '二人', vi: 'hai người' },
            { jp: '～にん', kj: '～人', vi: '~ người' },
            { jp: '～だい', kj: '～台', vi: '- cái (máy móc)' },
            { jp: '～まい', kj: '～枚', vi: 'tờ, tấm' },
            { jp: '～かい', kj: '～回', vi: 'lần' },
            { jp: '～じかん', kj: '～時間', vi: 'tiếng' },
            { jp: '～しゅうかん', kj: '～週間', vi: 'tuần' },
            { jp: '～かげつ', kj: '～ヶ月', vi: 'tháng' },
            { jp: '～ねん', kj: '～年', vi: 'năm' },
            { jp: 'いくつ', kj: '', vi: 'mấy cái, bao nhiêu cái' },
            { jp: 'どのくらい', kj: '', vi: 'bao lâu' },
            { jp: '～ぐらい', kj: '', vi: 'khoảng ~' },
            { jp: 'ぜんぶで', kj: '全部で', vi: 'tổng cộng' },
            { jp: '～だけ', kj: '', vi: 'chỉ ~' },
            { jp: 'います', kj: '居ます', vi: 'có, ở (người, động vật)' },
            { jp: 'かかります', kj: '', vi: 'mất, tốn (thời gian, tiền bạc)' },
            { jp: 'やすみます', kj: '休みます', vi: 'nghỉ, nghỉ ngơi' }
        ];

        // --- All JS logic goes here ---
        document.addEventListener('DOMContentLoaded', function() {
            // --- Mobile Menu Toggle ---
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const mobileTabs = document.getElementById('mobile-tabs');
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('click', () => {
                    mobileTabs.classList.toggle('hidden');
                    mobileTabs.classList.toggle('flex');
                });
            }
            
            // --- Vocab Table Logic ---
            const vocabTableBody = document.querySelector('#vocab-table tbody');
            const learnedWords = JSON.parse(localStorage.getItem('learnedWords')) || [];
            
            if (vocabTableBody) {
                vocabList.forEach((item, index) => {
                    const row = document.createElement('tr');
                    row.className = 'border-b vocab-row';
                    if (learnedWords.includes(index)) {
                        row.classList.add('learned');
                    }
                    
                    row.innerHTML = `
                        <td class="py-2 px-4 japanese-text">${item.jp}</td>
                        <td class="py-2 px-4 japanese-text kanji-col">${item.kj || ''}</td>
                        <td class="py-2 px-4">${item.vi}</td>
                        <td class="py-2 px-4 text-center">
                            <input type="checkbox" class="learned-checkbox" data-index="${index}" ${learnedWords.includes(index) ? 'checked' : ''}>
                        </td>
                    `;
                    vocabTableBody.appendChild(row);
                });
            }
            
            // Mark word as learned
            document.querySelectorAll('.learned-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const index = parseInt(this.dataset.index);
                    let learnedWords = JSON.parse(localStorage.getItem('learnedWords')) || [];
                    
                    if (this.checked) {
                        if (!learnedWords.includes(index)) {
                            learnedWords.push(index);
                        }
                        this.closest('.vocab-row').classList.add('learned');
                    } else {
                        learnedWords = learnedWords.filter(i => i !== index);
                        this.closest('.vocab-row').classList.remove('learned');
                    }
                    
                    localStorage.setItem('learnedWords', JSON.stringify(learnedWords));
                });
            });
            
            // Reset learned words
            document.getElementById('reset-learned').addEventListener('click', function() {
                localStorage.removeItem('learnedWords');
                document.querySelectorAll('.vocab-row').forEach(row => {
                    row.classList.remove('learned');
                });
                document.querySelectorAll('.learned-checkbox').forEach(checkbox => {
                    checkbox.checked = false;
                });
            });
            
            // Search vocabulary
            const searchInput = document.getElementById('vocab-search');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    document.querySelectorAll('.vocab-row').forEach(row => {
                        const jp = row.children[0].textContent.toLowerCase();
                        const kj = row.children[1].textContent.toLowerCase();
                        const vi = row.children[2].textContent.toLowerCase();
                        
                        if (jp.includes(searchTerm) || kj.includes(searchTerm) || vi.includes(searchTerm)) {
                            row.style.display = '';
                        } else {
                            row.style.display = 'none';
                        }
                    });
                });
            }
            
            const kanjiToggleButton = document.getElementById('kanji-toggle-btn');
            const vocabTable = document.getElementById('vocab-table');
            if (kanjiToggleButton) {
                kanjiToggleButton.addEventListener('click', () => {
                    const isShowing = vocabTable.classList.toggle('show-kanji');
                    kanjiToggleButton.textContent = isShowing ? 'Ẩn Kanji' : 'Hiện Kanji';
                    kanjiToggleButton.classList.toggle('bg-blue-500'); 
                    kanjiToggleButton.classList.toggle('hover:bg-blue-600');
                    kanjiToggleButton.classList.toggle('bg-gray-500'); 
                    kanjiToggleButton.classList.toggle('hover:bg-gray-600');
                });
            }

            // --- Collapse/Expand Logic ---
            document.querySelectorAll('.collapsible-toggle').forEach(toggle => {
                // Expand the first section by default
                if (toggle.closest('section').querySelector('.collapsible-content')) {
                    toggle.classList.add('expanded');
                    const content = toggle.nextElementSibling;
                    content.style.maxHeight = content.scrollHeight + "px";
                }
                
                toggle.addEventListener('click', (e) => {
                    const currentToggle = e.currentTarget;
                    currentToggle.classList.toggle('expanded');
                    const content = currentToggle.nextElementSibling;
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                    } else {
                        content.style.maxHeight = content.scrollHeight + "px";
                    }
                });
            });

            // --- Flashcard Logic ---
            const flashcard = document.getElementById('flashcard');
            if (flashcard) {
                let currentCardIndex = 0; 
                let deck = [...vocabList];
                const flashcardJp = document.getElementById('flashcard-jp');
                const flashcardKj = document.getElementById('flashcard-kj');
                const flashcardVi = document.getElementById('flashcard-vi');
                const counter = document.getElementById('card-counter');
                let autoFlipInterval = null;
                
                function showCard(index) {
                    const cardData = deck[index];
                    flashcardJp.textContent = cardData.jp; 
                    flashcardKj.textContent = cardData.kj || '';
                    flashcardVi.textContent = cardData.vi; 
                    counter.textContent = `${index + 1} / ${deck.length}`;
                    flashcard.classList.remove('is-flipped');
                }
                
                document.getElementById('prev-card').addEventListener('click', () => { 
                    currentCardIndex = (currentCardIndex - 1 + deck.length) % deck.length; 
                    showCard(currentCardIndex); 
                });
                
                document.getElementById('next-card').addEventListener('click', () => { 
                    currentCardIndex = (currentCardIndex + 1) % deck.length; 
                    showCard(currentCardIndex); 
                });
                
                document.getElementById('shuffle-cards').addEventListener('click', () => { 
                    deck.sort(() => Math.random() - 0.5); 
                    currentCardIndex = 0; 
                    showCard(currentCardIndex); 
                });
                
                document.getElementById('auto-flip').addEventListener('click', function() {
                    if (autoFlipInterval) {
                        clearInterval(autoFlipInterval);
                        autoFlipInterval = null;
                        this.innerHTML = '<i class="fas fa-sync mr-1"></i> Tự động lật';
                        this.classList.remove('bg-red-500');
                        this.classList.add('bg-green-500');
                    } else {
                        autoFlipInterval = setInterval(() => {
                            flashcard.classList.toggle('is-flipped');
                        }, 2000);
                        this.innerHTML = '<i class="fas fa-stop mr-1"></i> Dừng';
                        this.classList.remove('bg-green-500');
                        this.classList.add('bg-red-500');
                    }
                });
                
                flashcard.addEventListener('click', () => flashcard.classList.toggle('is-flipped'));
                showCard(0);
            }

            // --- Multiple Choice Quiz Logic ---
            const quizQuestionEl = document.getElementById('quiz-question');
            if (quizQuestionEl) {
                let quizDeck = [...vocabList]; 
                let currentQuestion = null; 
                let score = 0; 
                let totalQuestions = 0;
                const optionsEl = document.getElementById('quiz-options');
                const scoreEl = document.getElementById('quiz-score');
                const nextBtn = document.getElementById('next-quiz-question');
                
                function generateQuestion() {
                    optionsEl.innerHTML = ''; 
                    nextBtn.classList.add('hidden');
                    if (quizDeck.length === 0) quizDeck = [...vocabList];
                    const questionIndex = Math.floor(Math.random() * quizDeck.length);
                    currentQuestion = quizDeck.splice(questionIndex, 1)[0];
                    quizQuestionEl.innerHTML = `<span class="text-4xl">${currentQuestion.jp}</span> <span class="text-2xl text-gray-500">${currentQuestion.kj || ''}</span>`;
                    
                    const otherOptions = vocabList
                        .filter(v => v.vi !== currentQuestion.vi)
                        .sort(() => Math.random() - 0.5)
                        .slice(0, 3);
                    
                    const options = [currentQuestion, ...otherOptions].sort(() => Math.random() - 0.5);
                    
                    options.forEach(option => {
                        const button = document.createElement('button');
                        button.textContent = option.vi;
                        button.className = 'quiz-option p-4 border rounded-lg text-lg';
                        button.addEventListener('click', () => checkAnswer(button, option));
                        optionsEl.appendChild(button);
                    });
                }
                
                function checkAnswer(button, selectedOption) {
                    const buttons = optionsEl.querySelectorAll('button');
                    buttons.forEach(btn => btn.disabled = true);
                    
                    if (selectedOption.vi === currentQuestion.vi) { 
                        button.classList.add('correct'); 
                        score++; 
                    } else { 
                        button.classList.add('incorrect'); 
                        buttons.forEach(btn => { 
                            if (btn.textContent === currentQuestion.vi) { 
                                btn.classList.add('correct'); 
                            } 
                        }); 
                    }
                    
                    totalQuestions++; 
                    scoreEl.textContent = `Điểm: ${score} / ${totalQuestions}`; 
                    nextBtn.classList.remove('hidden');
                }
                
                nextBtn.addEventListener('click', generateQuestion);
                generateQuestion(); 
                scoreEl.textContent = `Điểm: 0 / 0`;
            }
        });
    </script>
</body>
</html>